<?xml version="1.0" encoding="UTF-8" ?>

<Module>
  <ModulePrefs title="Time Tracker" author="Reed Wilson">
    <Require feature="google.calendar-0.5.read"/>
  </ModulePrefs>
  <Content type="html">
    <![CDATA[
      <html>
        <script type="text/javascript">
          window.addEventListener("DOMContentLoaded", function() {
            doWork();
          }, false);

          function eventCallback(response) {
            // get a collection of tags and the time associated with the tags
            // { name: "name", time: "float" }

            console.log("keys");
            for (key in response[0].events[0])
            {
                console.log(key);
            }
            console.log("done");
            console.log("response.length " + response.length);
            console.log("response.name " + response[0].name);
            console.log("response.error " + response[0].error);
            console.log("response.events.length " + response[0].events.length);
            console.log("response.events[0].title " + response[0].events[0].title);
            console.log("response.events[0].allDay " + response[0].events[0].allDay);
            console.log("response.events[0].id " + response[0].events[0].id);
            console.log("response.events[0].details " + response[0].events[0].details);

            document.getElementById('content_div').innerHTML = response;
          }

          function doWork() {
            var startDate = {year: 2015, month: 1, date : 9, hour : 0, minute:0, second: 0};
            var endDate = {year: 2015, month: 1, date : 10, hour : 0, minute: 0, second: 0};

            google.calendar.read.getEvents(eventCallback, ["reedcwilson@gmail.com"], startDate, endDate, {'requestedFields': ['owner', 'status', 'attendeeCount', 'details']});
          }

        </script>

        <div id="content_div"></div>
      </html>
    ]]>
  </Content>
</Module>
